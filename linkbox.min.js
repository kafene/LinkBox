javascript:(function(m,n){var o=m.document;[].slice.call(o.querySelectorAll('[id^="linkbox_frame_"]')).forEach(function(a){a.parentNode.removeChild(a)});var p=function(){var f=(m.getSelection||o.getSelection)();var g=[].slice.call(o.links);if(0!==f.toString().trim().length){g=g.filter(function(a){return f.containsNode(a,false)})}g.forEach(function(a){a.href=a.href.replace(/[#?&]*$/,'')});g=g.filter(function(a,b,c){var d=c.lastIndexOf(a.href)==b.href;var e=(''==a.href.trim());return!d&&!e});return g};var q=function(a){var b=a.textContent.trim();if(0!=b.length){return b}if(a.title){return a.title}if(a.alt){return a.alt}var c=a.parentNode;if(c&&c.title){return c.title}if(c&&c.alt){return c.alt}return''};var s={};s.linkDisplayMode='title';s.linkContainerType='list';s.links=p();if(0==s.links.length){m.alert('No links found.');return null}s.css='*{box-sizing:border-box !important;}'+'body,html{height:100%;width:100%;padding:0;margin:0;}'+'#linkbox_table'+',ol{font:normal 13px/115% monospace}'+'body{'+'overflow:scroll;white-space:nowrap;text-align:left;'+'color:#900;padding:1em;}'+'#linkbox_close_button{'+'color:#fee;background-color:#cd5c5c;display:inline-block;'+'position:absolute;top:3px;right:3px;border:1px solid #fcc;'+'border-radius:3px;padding:0 3px;font:700 14px/100% monospace;'+'cursor:pointer;}'+'button{font:700 13px/115% sans-serif;text-align:left;cursor:pointer;}'+'#linkbox_textarea{width:100%;height:100%;}'+'#linkbox_table,#linkbox_table td{width:100%;vertical-align:top;}'+'#linkbox_table,#linkbox_link_container{height:100%;}';s.injectFrame=function(){s.frame=o.createElement('iframe');s.frame.id='linkbox_frame_'+m.Math.random().toString(36).substring(2);s.frame.style.cssText=('display:block;position:fixed;top:10px;left:10px;height:90%;'+'width:'+m.Math.min(parseInt(o.documentElement.clientWidth*0.5,10),600)+'px;'+'border:3px double #000;border-radius:5px;background-color:#fff;'+'padding:1em;margin:0;z-index:999999999;opacity:0.9;'+'overflow-x:auto;overflow-y:auto;visibility:visible;'+'white-space:nowrap;padding:0;margin:0;').replace(';',' !important;');s.frame.addEventListener('load',function(){s.document=s.frame.contentDocument;s.injectTemplate();s.document.addEventListener('toggleLinkDisplayMode',s.toggleLinkDisplayMode);s.document.addEventListener('toggleLinkContainerType',s.toggleLinkContainerType);s.setContent(s.createLinkList())});(o.body||o.documentElement).appendChild(s.frame)};s.injectTemplate=function(){var a=s.document.createElement('style');a.type='text/css';a.appendChild(s.document.createTextNode(s.css));s.document.head.appendChild(a);var b=s.document.createElement('div');b.id='linkbox_close_button';b.innerHTML='&times;';b.addEventListener('click',function(e){e.preventDefault&&e.preventDefault();s.frame.parentNode.removeChild(s.frame)});var c=s.document.createElement('tr');var d=s.document.createElement('td');var f=s.document.createElement('button');d.id='dm_toggle';f.textContent='Toggle links (title <=> href)';f.addEventListener('click',s.toggleLinkDisplayMode);d.appendChild(f);c.appendChild(d);var g=s.document.createElement('tr');var h=s.document.createElement('td');var i=s.document.createElement('button');h.id='ct_toggle';i.textContent='Toggle content (list <=> textarea)';i.addEventListener('click',s.toggleLinkContainerType);h.appendChild(i);g.appendChild(h);var j=s.document.createElement('tr');var k=s.document.createElement('td');k.id='linkbox_link_container';j.appendChild(k);var l=s.document.createElement('table');l.id='linkbox_table';l.appendChild(c);l.appendChild(g);l.appendChild(j);s.document.body.appendChild(b);s.document.body.appendChild(l)};s.createLinkTextarea=function(){var b=s.document.getElementById('linkbox_textarea');b&&b.parentNode.removeChild(b);var c=s.document.createElement('textarea');c.id='linkbox_textarea';c.textContent='';s.links.forEach(function(a){switch(s.linkDisplayMode){case'href':c.textContent+=a.href+"\n";break;case'title':c.textContent+='- ['+a.title+']('+a.href+')'+"\n";break}});return c};s.createLinkList=function(){var d=s.document.getElementById('linkbox_list');d&&d.parentNode.removeChild(d);var e=s.document.createElement('ol');e.id='linkbox_list';s.links.forEach(function(b){var c=s.document.createElement('li');var a=s.document.createElement('a');a.href=b.href;a.title=b.textContent.trim()||b.href;switch(s.linkDisplayMode){case'href':a.textContent=a.title;break;case'title':a.textContent=a.href;break}c.appendChild(a);e.appendChild(c)});return e};s.emptyLinkContainer=function(){var b=s.document.getElementById('linkbox_link_container');if(!b){return null};[].slice.call(b.querySelectorAll('*')).forEach(function(a){a.parentNode.removeChild(a)})};s.setContent=function(a){s.emptyLinkContainer();s.document.getElementById('linkbox_link_container').appendChild(a)};s.renderLinkContainer=function(){switch(s.linkContainerType){case'textarea':s.setContent(s.createLinkTextarea());break;case'list':s.setContent(s.createLinkList());break}};s.toggleLinkContainerType=function(){s.linkContainerType=(s.linkContainerType=='list')?'textarea':'list';s.renderLinkContainer()};s.toggleLinkDisplayMode=function(){s.linkDisplayMode=(s.linkDisplayMode=='title')?'href':'title';s.renderLinkContainer()};(function r(f){/in/i.test(o.readyState)?m.setTimeout(r,9,f):f()})(s.injectFrame)})(window);
